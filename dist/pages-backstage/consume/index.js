require("./../../runtime.js"),require("./../../remax-vendors.js"),(wx.webpackJsonp=wx.webpackJsonp||[]).push([["pages-backstage/consume/index"],{"./src/pages-backstage/consume/index.css":
/*!***********************************************!*\
  !*** ./src/pages-backstage/consume/index.css ***!
  \***********************************************/
/*! no static exports found */function(e,t,a){},"./src/pages-backstage/consume/index.css?modules":
/*!*******************************************************!*\
  !*** ./src/pages-backstage/consume/index.css?modules ***!
  \*******************************************************/
/*! no static exports found */function(e,t,a){e.exports={body:"body___3ACuv",item:"item___1gMzO",label:"label___2lVj9",scan:"scan___3oehA"}},"./src/pages-backstage/consume/index.entry.js":
/*!****************************************************!*\
  !*** ./src/pages-backstage/consume/index.entry.js ***!
  \****************************************************/
/*! no exports provided */function(e,t,a){"use strict";a.r(t);var n=a(/*! @remax/runtime */"./node_modules/@remax/runtime/esm/index.js"),r=a(/*! ./index.js */"./src/pages-backstage/consume/index.js");a(/*! ./index.css */"./src/pages-backstage/consume/index.css"),Page(Object(n.createPageConfig)(r.default,"pages-backstage/consume/index"))},"./src/pages-backstage/consume/index.js":
/*!**********************************************!*\
  !*** ./src/pages-backstage/consume/index.js ***!
  \**********************************************/
/*! exports provided: default */function(e,t,a){"use strict";a.r(t);var n=a(/*! remax */"./node_modules/remax/esm/index.js"),r=a(/*! react */"./node_modules/react/index.js"),c=a.n(r),s=a(/*! @remax/wechat */"./node_modules/@remax/wechat/esm/index.js"),u=a(/*! annar */"./node_modules/annar/esm/index.js"),l=a(/*! ./index.css?modules */"./src/pages-backstage/consume/index.css?modules"),o=a.n(l),m=a(/*! ../../hooks/useDidMount */"./src/hooks/useDidMount.js"),i=a(/*! ../../utils */"./src/utils/index.js");function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==a)return;var n,r,c=[],s=!0,u=!1;try{for(a=a.call(e);!(s=(n=a.next()).done)&&(c.push(n.value),!t||c.length!==t);s=!0);}catch(e){u=!0,r=e}finally{try{s||null==a.return||a.return()}finally{if(u)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=function(){var e=Object(n.useQuery)().type,t=Object(r.useRef)(),a=b(Object(r.useState)(),2),l=a[0],p=a[1],d=b(Object(r.useState)(),2),f=d[0],g=d[1],j=b(Object(r.useState)(),2),y=j[0],x=j[1],E=b(Object(r.useState)(),2),h=E[0],v=E[1],w=b(Object(r.useState)([]),2),O=w[0],N=w[1],k=Object(r.useCallback)((function(e){v(e.detail.value)}),[]),_=Object(r.useCallback)((function(e,t){var a=t.detail.value;(0,{number:p,spend:g,presenter:x}[e])(a)}),[]),I=Object(r.useCallback)((function(){var a="1"===e?"/order/recharge":"/order/consume",n={phoneNumber:l};"1"===e?(n.recharge=Number(f)+Number(y),n.presenter=Number(y),n.payment=Number(f)):(n.cost=Number(O[h].price),n.product=O[h]),Object(i.request)(a,n).then((function(){t.current.success("1"===e?"充值成功":"消费成功")})).catch((function(e){t.current.error(e.message||"操作失败")}))}),[e,l,f,y,h,O]),V=Object(r.useCallback)((function(){Object(s.scanCode)({success:function(e){var a=JSON.parse(e.result||"{}").phoneNumber;a?p(a+""):t.current.error("无效的二维码")}})}),[]),S=Object(r.useMemo)((function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.View,{className:o.a.item},c.a.createElement(s.View,{className:o.a.label},c.a.createElement(s.Text,null,"会员号"),c.a.createElement(s.View,{className:o.a.scan,onTap:V},c.a.createElement(u.Icon,{type:"scan",size:"40px"}))),c.a.createElement(s.Input,{value:l,type:"number",onInput:_.bind(null,"number"),placeholder:"请输入会员号或扫描"})),c.a.createElement(s.View,{className:o.a.item},c.a.createElement(s.View,{className:o.a.label},"产品"),c.a.createElement(s.Picker,{value:h,mode:"selector",range:O,rangeKey:"name",onChange:k},c.a.createElement(s.Input,{value:h?O[h].name+" / ¥"+O[h].price:"",placeholder:"请选择消费的产品",disabled:!0}))))}),[h,O,l]),C=Object(r.useMemo)((function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.View,{className:o.a.item},c.a.createElement(s.View,{className:o.a.label},c.a.createElement(s.Text,null,"会员号"),c.a.createElement(s.View,{className:o.a.scan,onTap:V},c.a.createElement(u.Icon,{size:"40px",type:"scan"}))),c.a.createElement(s.Input,{type:"number",value:l,onInput:_.bind(null,"number"),placeholder:"请输入会员号或扫描"})),c.a.createElement(s.View,{className:o.a.item},c.a.createElement(s.View,{className:o.a.label},"充值金额"),c.a.createElement(s.Input,{type:"number",value:f,onInput:_.bind(null,"spend"),placeholder:"请输入充值金额"})),c.a.createElement(s.View,{className:o.a.item},c.a.createElement(s.View,{className:o.a.label},"赠送金额"),c.a.createElement(s.Input,{type:"number",value:y,onInput:_.bind(null,"presenter"),placeholder:"请输入赠送金额"})))}),[l]);return Object(m.default)((function(){"2"===e&&Object(i.request)("/product/list").then((function(e){var t=e.list;N(t)}))})),c.a.createElement(s.View,{className:o.a.body},c.a.createElement(u.Ling,{ref:t}),"1"===e?C:S,c.a.createElement(s.Button,{type:"primary",onTap:I},"确认"))}},3:
/*!**********************************************************!*\
  !*** multi ./src/pages-backstage/consume/index.entry.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,a){e.exports=a(/*! /Users/grig/Desktop/grig/salon-remax/src/pages-backstage/consume/index.entry.js */"./src/pages-backstage/consume/index.entry.js")}},[[3,"runtime","remax-vendors"]]]);