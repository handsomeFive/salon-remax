require("./../../runtime.js"),require("./../../remax-vendors.js"),require("./../../remax-styles.js"),(wx.webpackJsonp=wx.webpackJsonp||[]).push([["pages-backstage/product/index"],{"./src/components/Modal/ModalPortal.jsx":
/*!**********************************************!*\
  !*** ./src/components/Modal/ModalPortal.jsx ***!
  \**********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! react */"./node_modules/react/index.js"),a=n.n(r),o=n(/*! ./index.css?modules */"./src/components/Modal/index.css?modules"),c=n.n(o),s=n(/*! remax/wechat */"./node_modules/remax/wechat.js"),l=n(/*! classnames */"./node_modules/classnames/index.js"),i=n.n(l);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t,n,o=e.archor,l=void 0===o?"bottom":o,d=e.children,m=e.open,p=e.onClose,f=e.contentClassNames,b=void 0===f?"":f,_=e.tapMaskClose,j=void 0===_||_,h=Object(r.useCallback)((function(){p&&j&&p()}),[p,j]),g=a.a.createElement(s.View,{className:i()(c.a.modalRoot,(t={},u(t,c.a.archorTop,"top"===l),u(t,c.a.archorBottom,"bottom"===l),u(t,c.a.archorCenter,"center"===l),u(t,c.a.show,m),t))},a.a.createElement(s.View,{className:i()(c.a.modalMask,m?c.a.openMask:""),onTap:h}),a.a.createElement(s.View,{className:i()(c.a.modalContent,b,(n={},u(n,c.a.modalTopContent,"top"===l),u(n,c.a.modalBottomContent,"bottom"===l),u(n,c.a.modalCenterContent,"center"===l),u(n,c.a.showContent,m&&"center"!==l),u(n,c.a.showCenterContent,m&&"center"===l),n))},d));return"center"===l?m?g:null:g}},"./src/components/Modal/index.css?modules":
/*!************************************************!*\
  !*** ./src/components/Modal/index.css?modules ***!
  \************************************************/
/*! no static exports found */function(e,t,n){e.exports={modalRoot:"modalRoot___1WlMK",archorTop:"archorTop___2CtUo",archorBottom:"archorBottom___1rMZh",archorCenter:"archorCenter___IXFGN",show:"show___1t5Z8",modalMask:"modalMask___1x9UH",openMask:"openMask___2Ke0w",modalContent:"modalContent___Jr85U",modalBottomContent:"modalBottomContent___3tSTN",modalTopContent:"modalTopContent___254mF",modalCenterContent:"modalCenterContent___1vDs1",centerShow:"centerShow___2i2-B",showContent:"showContent___fhEgE",showCenterContent:"showCenterContent___11TlP"}},"./src/components/Modal/index.jsx":
/*!****************************************!*\
  !*** ./src/components/Modal/index.jsx ***!
  \****************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! react */"./node_modules/react/index.js"),a=n.n(r),o=n(/*! ./ModalPortal */"./src/components/Modal/ModalPortal.jsx"),c=n(/*! @remax/runtime */"./node_modules/@remax/runtime/esm/index.js");t.default=function(e){var t=Object(c.usePageInstance)();return Object(c.createPortal)(a.a.createElement(o.default,e),t.modalContainer)}},"./src/pages-backstage/product/index.css":
/*!***********************************************!*\
  !*** ./src/pages-backstage/product/index.css ***!
  \***********************************************/
/*! no static exports found */function(e,t,n){},"./src/pages-backstage/product/index.css?modules":
/*!*******************************************************!*\
  !*** ./src/pages-backstage/product/index.css?modules ***!
  \*******************************************************/
/*! no static exports found */function(e,t,n){e.exports={listItem:"listItem___3800L",listItemPart:"listItemPart___2w_8F",addIcon:"addIcon___2OxnC",form:"form___3RhKh",footer:"footer___3lW73",btn:"btn___3DgQX",cancel:"cancel___35Sbq",ok:"ok___3YULj",item:"item____ZujJ"}},"./src/pages-backstage/product/index.entry.js":
/*!****************************************************!*\
  !*** ./src/pages-backstage/product/index.entry.js ***!
  \****************************************************/
/*! no exports provided */function(e,t,n){"use strict";n.r(t);var r=n(/*! @remax/runtime */"./node_modules/@remax/runtime/esm/index.js"),a=n(/*! ./index.js */"./src/pages-backstage/product/index.js");n(/*! ./index.css */"./src/pages-backstage/product/index.css"),Page(Object(r.createPageConfig)(a.default,"pages-backstage/product/index"))},"./src/pages-backstage/product/index.js":
/*!**********************************************!*\
  !*** ./src/pages-backstage/product/index.js ***!
  \**********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! react */"./node_modules/react/index.js"),a=n.n(r),o=n(/*! @remax/wechat */"./node_modules/@remax/wechat/esm/index.js"),c=n(/*! annar */"./node_modules/annar/esm/index.js"),s=n(/*! ./index.css?modules */"./src/pages-backstage/product/index.css?modules"),l=n.n(s),i=n(/*! ../../hooks/useDidMount */"./src/hooks/useDidMount.js"),u=n(/*! ../../utils/index */"./src/utils/index.js"),d=n(/*! ../../components/List */"./src/components/List/index.js"),m=n(/*! ../../components/Modal */"./src/components/Modal/index.jsx"),p=["options"],f=["_id"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,s=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=[{data:"1",text:"修改",color:"#faad14"},{data:"2",text:"删除",color:"#ff4d4f",type:"warn"}];t.default=function(){var e=Object(r.useRef)(),t=g(Object(r.useState)([]),2),n=t[0],s=t[1],b=g(Object(r.useState)(null),2),O=b[0],w=b[1],y=g(Object(r.useState)(!1),2),v=y[0],C=y[1],k=Object(r.useRef)([]),E=Object(r.useCallback)((function(e){var t=k.current.slice();t.push(e),s(t)}),[]),P=Object(r.useCallback)((function(e){var t=k.current.slice(),n=t.findIndex((function(t){return t._id===e._id}));t[n]=e,s(t)}),[]),I=Object(r.useCallback)((function(){C((function(e){return!e}))}),[]),M=Object(r.useCallback)((function(t,r){r.options;var a=h(r,p);"1"===t?(I(),w(a)):(Object(o.showLoading)(),Object(u.request)("/product/delete",{id:a._id}).then((function(){var t=n.slice(),r=t.findIndex((function(e){return e._id===a._id}));t.splice(r,1),s(t),e.current.success("删除成功"),Object(o.hideLoading)()})).catch((function(t){var n=t.message;e.current.error(n),Object(o.hideLoading)()})))}),[n]),T=Object(r.useCallback)((function(){w(null),I()}),[]),S=Object(r.useCallback)((function(e,t){var n=_(_({},O),{},j({},e,t.detail.value));w(n)}),[O]),N=Object(r.useCallback)((function(){if(O&&O.name&&O.price){var t=O._id,n=h(O,f),r=!t,a=r?"/product/add":"/product/update",c=r?n:{id:t,data:n};Object(o.showLoading)(),Object(u.request)(a,c).then((function(t){var n=t.data;e.current.success(r?"创建成功":"修改成功"),I(),Object(o.hideLoading)(),r&&E(n),!r&&P(n)})).catch((function(t){e.current.error(t.message||"操作失败"),I(),Object(o.hideLoading)()}))}else e.current.warning("\b请完成输入")}),[O]);return Object(i.default)((function(){Object(o.setNavigationBarTitle)({title:"产品管理"}),Object(o.showLoading)(),Object(u.request)("/product/list").then((function(e){var t=e.list;s(t),Object(o.hideLoading)()})).catch((function(t){var n=t.message;Object(o.hideLoading)(),e.current.error(n)}))})),Object(r.useEffect)((function(){k.current=n}),[n]),a.a.createElement(o.View,null,a.a.createElement(c.Ling,{ref:e}),a.a.createElement(d.default,{data:n.map((function(e){return _(_({},e),{},{options:x})})),onTapOption:M,render:function(e){return a.a.createElement(o.View,{className:l.a.listItem,key:e._id,__key:e._id},a.a.createElement(o.View,{className:l.a.listItemPart},a.a.createElement(o.View,null,a.a.createElement(o.Text,null,e.name))),a.a.createElement(o.View,null,"¥",a.a.createElement(o.Text,null,e.price)))}}),a.a.createElement(c.Button,{type:"primary",shape:"circle",icon:"add",float:!0,size:"superlarge",style:{bottom:"100px",right:"40px",zIndex:100},onTap:T}),a.a.createElement(m.default,{open:v,archor:"center",onClose:I},a.a.createElement(o.View,{className:l.a.form},a.a.createElement(o.View,{className:l.a.item},a.a.createElement(o.Input,{type:"text",placeholder:"请输入服务项",value:O?O.name:"",onInput:S.bind(null,"name")})),a.a.createElement(o.View,{className:l.a.item},a.a.createElement(o.Input,{type:"number",placeholder:"请输入价格",value:O?O.price:void 0,onInput:S.bind(null,"price")})),a.a.createElement(o.View,{className:l.a.footer},a.a.createElement(o.View,{className:l.a.btn+" "+l.a.cancel,onTap:I},"取消"),a.a.createElement(o.View,{className:l.a.btn+" "+l.a.ok,onTap:N},"确认")))))}},4:
/*!**********************************************************!*\
  !*** multi ./src/pages-backstage/product/index.entry.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,n){e.exports=n(/*! /Users/grig/Desktop/grig/salon-remax/src/pages-backstage/product/index.entry.js */"./src/pages-backstage/product/index.entry.js")}},[[4,"runtime","remax-vendors","remax-styles"]]]);